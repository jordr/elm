AC_INIT(test/test.cc)
AM_INIT_AUTOMAKE(Elm, 0.1)
AM_CONFIG_HEADER(config.h)

dnl C++ Support
AC_PROG_CXX
AC_STDC_HEADERS
AC_HAVE_HEADERS(string.h)
AC_PROG_RANLIB

dnl Dynamic Libraries
AC_LIBTOOL_DLOPEN
AC_DISABLE_SHARED
AC_PROG_LIBTOOL

dnl XML Support
has_libxml=yes
PKG_CHECK_MODULES(LIBXML, libxml-2.0,,[has_libxml=no])
AC_SUBST(LIBXML_CFLAGS)
AC_SUBST(LIBXML_LIBS)
AM_CONDITIONAL(HAS_LIBXML, test x$has_libxml = xyes)

dnl ELM_DEBUG_DEFS=-DELM_DEBUG_AVLTREE
AC_SUBST(ELM_DEBUG_DEFS)

AC_OUTPUT([
	Makefile
	src/Makefile
	test/Makefile
	include/Makefile
	include/elm/Makefile
	include/elm/block/Makefile
	include/elm/datastruct/Makefile
	include/elm/genstruct/Makefile
	include/elm/inhstruct/Makefile
	include/elm/io/Makefile
	include/elm/option/Makefile
	include/elm/string/Makefile
	include/elm/util/Makefile
	include/elm/system/Makefile
	include/elm/xom/Makefile
], [])
